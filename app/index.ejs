<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title><%= htmlWebpackPlugin.options.title %></title>
  </head>
  <body>
    <div id="app"></div>
    <script>
      // TODO: move this to a separate file
      (function () {
        const shell = require('electron').shell

        const supportExternalLinks = function (e) {
          let href
          let isExternal = false
          const checkDomElement = function (element) {
            if (element.nodeName === 'A') {
              href = element.getAttribute('href')
            }
            if (element.classList.contains('js-external-link')) {
              isExternal = true
            }
            if (href && isExternal) {
              shell.openExternal(href)
              e.preventDefault()
            } else if (element.parentElement) {
              checkDomElement(element.parentElement)
            }
          }

          checkDomElement(e.target)
        }

        document.addEventListener('click', supportExternalLinks, false)
      }())
    </script>
    <!-- webpack builds are automatically injected -->
  </body>
</html>
